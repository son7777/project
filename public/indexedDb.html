<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<!-- if (ACTIV_TASK_BTN.value==="CLICK-TO-SHOW-ONLY-ACTIV-TASKS"){ -->

<!-- } -->

<body>
    <script>
        const saveFilesInIndexedDB = async (files) => {
            // Open a database and store the files
            const dbName = 'file_database';
            const storeName = 'file_store';
            const request = window.indexedDB.open(dbName, 1);

            request.onsuccess = (event) => {
                const db = event.target.result;
                const tx = db.transaction([storeName], 'readwrite');
                const store = tx.objectStore(storeName);

                files.forEach((file) => {
                    const fileReader = new FileReader();
                    fileReader.readAsArrayBuffer(file);
                    fileReader.onload = (e) => {
                        store.put({
                            name: file.name,
                            data: e.target.result
                        });
                    };
                });

                tx.oncomplete = () => {
                    console.log('Files saved in IndexedDB');
                    db.close();
                };
            };

            request.onerror = (event) => {
                console.error('IndexedDB error:', event.target.errorCode);
            };
        };
    </script>
</body>

</html>